---
title: Анализ работы
---

Материалы будут выкладываться постепенно




<!-- # Контрольная работа № 1 -->

<!-- ## Распределение результатов -->

<!-- Вот такие предварительные результаты по контрольной. -->


<!-- ```{r, echo=FALSE} -->
<!-- class <- read.csv("data/class.csv") -->
<!-- reasult <- read.csv("data/Control_work_1.csv", encoding = "Utf-8") -->
<!-- res <- merge(class, reasult) -->
<!-- res$sum <- apply(res[,-c(1:8)], MARGIN = 1, FUN = sum) -->
<!-- res$Prop <- res$sum / ncol(res[,-c(1:8)]) * 100    -->

<!-- library(ggplot2)  -->

<!-- # library(doBy) -->
<!-- #  -->
<!-- # res_out <- summaryBy(sum ~ Group, data = res) -->

<!-- ggplot(res, aes(x = Prop)) + geom_histogram(fill = "blue", color = "black", binwidth = 10) + labs(x = "Процент правильных ответов") + geom_vline(xintercept = 49) + geom_text(aes(x = 60, y = 40, label = "Зачет")) -->

<!-- ``` -->

<!-- А вот так выглядит распределение по группам. Горизотальные линии отделяют тройку (50-60%), четверку (60-80%) и пятерку (более 80%). -->


<!-- ```{r, echo=FALSE} -->
<!-- ggplot(res, aes(x = factor(Group), y = Prop)) + geom_boxplot() + labs(x = "Группа", y = "Количество правильных ответов") + geom_hline(yintercept = c(49, 60, 80)) -->

<!-- ``` -->


<!-- ## Распределение оценок -->

<!-- ```{r, echo=FALSE} -->
<!-- res$credit[res$Prop >= 80] <- 5 -->

<!-- res$credit[res$Prop < 80 & res$Prop >= 60 ] <- 4 -->

<!-- res$credit[res$Prop < 60 & res$Prop >= 50 ] <- 3 -->

<!-- res$credit[res$Prop < 50 ] <- 2 -->

<!-- credits <- as.data.frame(table(res$credit)) -->
<!-- names(credits) <- c("Оценка", "Количество студентов") -->
<!-- library(knitr) -->
<!-- kable (credits, align = "cc") -->

<!-- ``` -->

<!-- Господа, тем, кто получил ниже тройки, надо собраться и на следующей контрольной подтянуться! Ну и не забывайте про повышающие коэффициенты за работу на семинарах... -->


<!-- ## Время выполнения работы -->

<!-- А вот так выглядит степень скооперированности работы студентов.  -->

<!-- ```{r, echo=FALSE} -->
<!-- time <- read.csv("data/Control_work_1_time.csv") -->
<!-- time_res <- merge(class, time) -->

<!-- time_res$start_date <- format(time_res$start_date,format = "%Y-%m-%d %H:%M:%S" ) -->

<!-- time_res$start_date <- strptime(time_res$start_date, format ="%Y-%m-%d %H:%M:%S"  ) -->

<!-- time_res$start_H <- as.numeric(format(time_res$start_date, "%H")) + as.numeric(format(time_res$start_date, "%M"))/60  -->


<!-- ggplot(time_res, aes(x = as.factor(Group), y = start_H)) + geom_boxplot() + labs(x = "Группа", y = "Час, когда начали работу") -->


<!-- ``` -->



<!-- Группа № 4, видимо, самая дружная :), у них минимальный разброс значений. Звонок другу... Хорошая, но не факт, что лучшая, технология. -->


<!-- <!-- ```{r} --> -->
<!-- <!-- cheat <- read.csv("data/Control_work_1_cheating.csv") --> -->
<!-- <!-- cheat_res <- merge(class, cheat) --> -->

<!-- <!-- cheat_res <- cheat_res[cheat_res$lesson_id %in% c(179985, 180749),] --> -->
<!-- <!-- ggplot(cheat_res, aes(x = as.factor(Group), y = cheat )) + geom_boxplot() --> -->
<!-- <!-- ``` --> -->

<!-- ## Трудность вопросов -->

<!-- А вот так выглядит распределение по количеству верных ответов на вопросы  -->

<!-- ```{r, echo=FALSE} -->
<!-- res_Q <- apply(res[,-c(1:8)], MARGIN = 2, FUN = sum)[1:22] -->

<!-- res_Q <- res_Q[order(res_Q)] -->
<!-- answers <- data.frame(Question = names(res_Q), Prop_TRUE = res_Q/nrow(res) *100) -->

<!-- answers <- answers[order(answers$Prop_TRUE),] -->

<!-- answers$Goodness <- ifelse(answers$Prop_TRUE < median(answers$Prop_TRUE), "Плохой вопрос", "Хороший вопрос") -->

<!-- ggplot(answers, aes(y=Prop_TRUE, x = Question)) + geom_col(aes(fill= Goodness)) + coord_flip() + scale_fill_manual(values = c("red", "green")) + labs(fill = "", x = "Вопрос", y = "% Правильных ответов") -->


<!-- ``` -->



<!-- # Домашняя работа № 1 -->

<!-- ## Распределение результатов по группам -->

<!-- ```{r, echo=FALSE} -->
<!-- class <- read.csv("data/class.csv") -->
<!-- reasult_hw <- read.csv("data/Home_work_1.csv", encoding = "Utf-8") -->
<!-- res <- merge(class, reasult_hw) -->
<!-- res$sum <- apply(res[,-c(1:7)], MARGIN = 1, FUN = sum) -->
<!-- res$Prop <- res$sum / ncol(res[,-c(1:8)]) * 100    -->

<!-- ggplot(res, aes(x = factor(Group), y = Prop)) + geom_boxplot() + labs(x = "Группа", y = "Доля правильных ответов") + geom_hline(yintercept = c(49, 60, 80)) -->


<!-- ``` -->


<!-- Замечательные результаты! Большинство получили пятерки. Это радует...  -->

<!-- Не раслабляйтесь, второе домашнее задание уже открыто. -->





<!-- # Домашняя работа № 2 -->

<!-- ## Распределение результатов по группам -->

<!-- ```{r, echo=FALSE} -->
<!-- class <- read.csv("data/class.csv") -->
<!-- reasult_hw <- read.csv("data/Home_work_2.csv", encoding = "Utf-8") -->
<!-- res <- merge(class, reasult_hw) -->
<!-- res$sum <- apply(res[,-c(1:7)], MARGIN = 1, FUN = sum) -->
<!-- res$Prop <- res$sum / ncol(res[,-c(1:8)]) * 100    -->

<!-- ggplot(res, aes(x = factor(Group), y = Prop)) + geom_boxplot() + labs(x = "Группа", y = "Доля правильных ответов") + geom_hline(yintercept = c(49, 60, 80)) -->


<!-- ``` -->


<!-- Отлично! Почти все получили пятерки...  -->

<!-- Уже боюсь вас на экзамене :) -->

<!-- Не раслабляйтесь, третье домашнее задание уже открыто. -->



<!-- # Контрольная работа № 2 -->

<!-- ## Распределение результатов -->


<!-- ```{r, echo=FALSE} -->
<!-- class <- read.csv("data/class.csv") -->
<!-- reasult <- read.csv("data/Control_work_2.csv", encoding = "Utf-8") -->
<!-- res <- merge(class, reasult) -->
<!-- res$sum <- apply(res[,-c(1:8)], MARGIN = 1, FUN = sum) -->
<!-- res$Prop <- res$sum / ncol(res[,-c(1:8)]) * 100    -->

<!-- library(ggplot2)  -->

<!-- # library(doBy) -->
<!-- #  -->
<!-- # res_out <- summaryBy(sum ~ Group, data = res) -->

<!-- ggplot(res, aes(x = Prop)) + geom_histogram(fill = "blue", color = "black", binwidth = 10) + labs(x = "Процент правильных ответов") + geom_vline(xintercept = 49) + geom_text(aes(x = 60, y = 40, label = "Зачет")) -->

<!-- ``` -->

<!-- По-моему, стало заметно лучше, чем в предыдущий раз. Странно... работа, по-моему, сложнее. Впрочем, см. ниже оценку времени выхода в эфир. -->




<!-- А вот так выглядит распределение по группам. Горизотальные линии отделяют тройку (50-60%), четверку (60-80%) и пятерку (более 80%). Соотношние между группами не изменилось, но зато резко упала дисперсия, что тоже хорошо. -->


<!-- ```{r, echo=FALSE} -->
<!-- ggplot(res, aes(x = factor(Group), y = Prop)) + geom_boxplot() + labs(x = "Группа", y = "Количество правильных ответов") + geom_hline(yintercept = c(49, 60, 80)) -->

<!-- ``` -->


<!-- ## Распределение оценок на контрольной №2 -->

<!-- ```{r, echo=FALSE} -->
<!-- res$credit[res$Prop >= 80] <- 5 -->

<!-- res$credit[res$Prop < 80 & res$Prop >= 60 ] <- 4 -->

<!-- res$credit[res$Prop < 60 & res$Prop >= 50 ] <- 3 -->

<!-- res$credit[res$Prop < 50 ] <- 2 -->

<!-- credits <- as.data.frame(table(res$credit)) -->
<!-- names(credits) <- c("Оценка", "Количество студентов") -->
<!-- library(knitr) -->
<!-- kable (credits, align = "cc") -->

<!-- ``` -->



<!-- ## Время выполнения работы -->


<!-- ```{r, echo=FALSE} -->
<!-- time <- read.csv("data/Control_work_2_time.csv") -->
<!-- time_res <- merge(class, time) -->

<!-- time_res$start_date <- format(time_res$start_date,format = "%Y-%m-%d %H:%M:%S" ) -->

<!-- time_res$start_date <- strptime(time_res$start_date, format ="%Y-%m-%d %H:%M:%S"  ) -->

<!-- time_res$start_H <- as.numeric(format(time_res$start_date, "%H")) + as.numeric(format(time_res$start_date, "%M"))/60  -->


<!-- ggplot(time_res, aes(x = as.factor(Group), y = start_H)) + geom_boxplot() + labs(x = "Группа", y = "Час, когда начали работу") -->


<!-- ``` -->


<!-- Ух, как все скоординировались-то! :)  -->

<!-- Коллективный разум - это круто!  -->

<!-- Но не забывайте, что **на экзамене придется отдуваться в идивидуальном порядке**... -->


<!-- ## Трудность вопросов -->

<!-- А вот так выглядит распределение по количеству верных ответов на вопросы  -->

<!-- ```{r, echo=FALSE} -->
<!-- res_Q <- apply(res[,-c(1:8)], MARGIN = 2, FUN = sum)[1:25] -->

<!-- res_Q <- res_Q[order(res_Q)] -->
<!-- answers <- data.frame(Question = names(res_Q), Prop_TRUE = res_Q/nrow(res) *100) -->

<!-- answers <- answers[order(answers$Prop_TRUE),] -->

<!-- answers$Goodness <- ifelse(answers$Prop_TRUE < median(answers$Prop_TRUE), "Плохой вопрос", "Хороший вопрос") -->

<!-- ggplot(answers, aes(y=Prop_TRUE, x = Question)) + geom_col(aes(fill= Goodness)) + coord_flip() + scale_fill_manual(values = c("red", "green")) + labs(fill = "", x = "Вопрос", y = "% Правильных ответов") -->


<!-- ``` -->



<!-- # Домашняя работа № 3 -->

<!-- ## Распределение результатов по группам -->

<!-- ```{r, echo=FALSE} -->
<!-- class <- read.csv("data/class.csv") -->
<!-- reasult_hw <- read.csv("data/Home_work_3.csv", encoding = "Utf-8") -->
<!-- res <- merge(class, reasult_hw) -->
<!-- res$sum <- apply(res[,-c(1:7)], MARGIN = 1, FUN = sum) -->
<!-- res$Prop <- res$sum / sum(reasult_hw[1, -c(1:3)]) * 100    -->

<!-- ggplot(res, aes(x = factor(Group), y = Prop)) + geom_boxplot() + labs(x = "Группа", y = "Доля правильных ответов") + geom_hline(yintercept = c(49, 60, 80)) -->


<!-- ``` -->


<!-- # Финальные результаты по Домашним работам и по Контрольным -->

<!-- ```{r, echo=FALSE} -->
<!-- class <- read.csv("data/class.csv") -->
<!-- reasult_hw1 <- read.csv("data/Home_work_1.csv", encoding = "Utf-8") -->
<!-- reasult_hw2 <- read.csv("data/Home_work_2.csv", encoding = "Utf-8") -->
<!-- reasult_hw3 <- read.csv("data/Home_work_3.csv", encoding = "Utf-8") -->


<!-- reasult_contr1 <- read.csv("data/Control_work_1.csv", encoding = "Utf-8") -->
<!-- reasult_contr2 <- read.csv("data/Control_work_2.csv", encoding = "Utf-8") -->



<!-- tmp <- merge(reasult_hw1, reasult_hw2[,-c(2:3)], by = c("user_id")) -->
<!-- all_hw <- merge(tmp,reasult_hw3[,-c(2:3)], by = c("user_id")) -->

<!-- Total_sum_hw <- sum(all_hw[all_hw$user_id == 28414308, ][1, -c(1:3)]) -->

<!-- all_hw$sum <- apply(all_hw[,-c(1:3)], MARGIN = 1, FUN = sum) -->


<!-- all_contr <- merge(reasult_contr1, reasult_contr2[,-c(2:3)], by = c("user_id")) -->


<!-- Total_sum_contr <- sum(as.numeric(all_contr[all_contr$user_id == 28414308, ][-c(1:3)])) -->

<!-- all_contr$sum <- apply(all_contr[,-c(1:3)], MARGIN = 1, FUN = sum) -->


<!-- res_hw <- merge(class, all_hw[,c("user_id", "last_name", "first_name", "sum")]) -->

<!-- res_contr <- merge(class, all_contr[,c("user_id", "last_name", "first_name", "sum")]) -->

<!-- res <- merge(res_hw, res_contr, by = c("user_id")) -->

<!-- result_total <- data.frame(Name = paste(res$Last_name.x, " ", res$First_name.x), Group = res$Group.x,  Sum_Contr = res$sum.y, Sum_HW = round(res$sum.x)) -->



<!-- result_total <- result_total[!is.na(result_total$Group), ]  -->


<!-- result_total <- result_total[order(result_total$Group), ] -->



<!-- sem_fin <- read.csv("data/Seminars_2018_final.csv", header = TRUE) -->

<!-- sem_fin_2 <- data.frame(Name = paste(sem_fin$Last_name," ",sem_fin$First_name), Seminar_score = sem_fin$Score*3) -->


<!-- result_total <- merge(result_total, sem_fin_2) -->

<!-- result_total$Sum_Contr <- round(result_total$Sum_Contr/49*100) -->
<!-- result_total$Sum_HW <- round(result_total$Sum_HW/77*100) -->



<!-- #  -->
<!-- # kable(result_total, col.names = c("Ф. И.", "Группа", "Контрольные (макс. 49)", "Самостоятельные (макс.77)"), align = "lccc", row.names = FALSE) -->


<!-- kable(result_total, col.names = c("Ф. И.", "Группа", "Контрольные %", "Самостоятельные %", "Надбавка за семинары"), align = "lcccc", row.names = FALSE) -->

<!-- ``` -->



<!-- # Файл с оценками за самостоятельные работы и контрольные работы -->

<!-- - [Оценки](data/all_credits.xlsx) -->






